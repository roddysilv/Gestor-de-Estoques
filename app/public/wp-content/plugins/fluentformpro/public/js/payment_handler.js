!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=290)}({290:function(e,t,n){e.exports=n(291)},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){e||(e=0);var n=parseInt(e)/100,a=2;e%100==0&&0==t.decimal_points&&(a=0);var r=",",i=".";"dot_comma"!=t.currency_separator&&(r=".",i=",");var o,u,c,s,f,l,d,p,m,y,_=t.currency_sign||"",h=(o=n,u=a,c=i,s=r,f=isNaN(u)?2:Math.abs(u),l=c||".",d=void 0===s?",":s,p=o<0?"-":"",m=parseInt(o=Math.abs(o).toFixed(f))+"",y=(y=m.length)>3?y%3:0,p+(y?m.substr(0,y)+d:"")+m.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+d)+(f?l+Math.abs(o-m).toFixed(f).slice(2):""));return"right"==t.currency_sign_position?h+""+_:"left_space"==t.currency_sign_position?_+" "+h:"right_space"==t.currency_sign_position?h+" "+_:_+""+h},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$form=t,this.formId=t.attr("data-form_id"),this.paymentMethod="",this.paymentConfig=window.fluentform_payment_config}return r(e,[{key:"$t",value:function(e){return this.paymentConfig.i18n[e]?this.paymentConfig.i18n[e]:e}},{key:"init",value:function(){var e=this;this.$form.on("fluentform_next_action_payment",function(t,n){var a=n.response.data;a.actionName&&(jQuery("<div/>",{id:"form_success",class:"ff-message-success"}).html(a.message).insertAfter(e.$form),e[a.actionName](a))}),this.calculatePayments(),this.$form.find(".ff_payment_item,.ff_quantity_item").on("change",function(){e.calculatePayments()})}},{key:"calculatePayments",value:function(){var e=this,t=this.$form,n={};t.find(".ff-el-group:not(.ff_excluded)").find(".ff_payment_item").each(function(e,a){var r=a.type,i=jQuery(a),o=i.attr("name");if("radio"==r){var u=t.find("input[name="+o+"]:checked").attr("data-payment_value");u&&(n[o]=parseFloat(u))}else if("hidden"==r){var c=i.attr("data-payment_value");c&&(n[o]=parseFloat(c))}else if("number"==r||"text"==r){var s=jQuery(this).val();s&&(n[o]=parseFloat(s))}else if("checkbox"==r){var f=i.data("group_id"),l=0;t.find('input[data-group_id="'+f+'"]:checked').each(function(e,t){var n=jQuery(t).data("payment_value");n&&(l+=parseFloat(n))}),n[f]=l}else if("select-one"==r){var d=t.find("select[name="+o+"] option:selected").data("payment_value");d&&(n[o]=parseFloat(d))}});var a=0;jQuery.each(n,function(t,n){n&&!isNaN(n)&&(a+=n*e.getQuantity(t))}),t.trigger("payment_amount_change",{amount:a,items:n}),t.find(".ff_order_total").html(this.getFormattedPrice(a)),t.data("payment_total",a)}},{key:"getQuantity",value:function(e){var t=this.$form.find("input[data-target_product="+e+"]");return t.length?parseInt(t.val()):1}},{key:"getFormattedPrice",value:function(e){return a(parseInt(100*e),window["fluentform_payment_config_"+this.formId].currency_settings)}},{key:"stripeRedirectToCheckout",value:function(e){new Stripe(this.paymentConfig.stripe.publishable_key).redirectToCheckout({sessionId:e.sessionId}).then(function(e){console.log(e)})}},{key:"normalRedirect",value:function(e){window.location.href=e.redirect_url,console.log(e)}}]),e}();jQuery(document).ready(function(e){e.each(e("form.fluentform_has_payment"),function(){new i(e(this)).init()})})}});